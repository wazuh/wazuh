# Test cases for syscollector deadlock detection during service stop
# Uses a timing sweep approach - tries stopping at different delays after scan starts.
#
# The test:
#   1. Waits for agent to connect to manager (asserted)
#   2. Waits for syscollector scan to start (asserted)
#   3. Waits delay_ms milliseconds and stops the service
#   4. Sweeps through delay values from delay_start_ms to delay_end_ms
#
# If DB init error is detected, the cycle is skipped (not counted as failure)
#
# Parameters:
#   delay_start_ms: Starting delay in milliseconds (default: 0)
#   delay_end_ms: Ending delay in milliseconds (default: 1000)
#   delay_increment_ms: Delay increment in milliseconds (default: 50)
#   cycles_per_delay: Number of stop cycles per delay value (default: 3)

- name: "Timing sweep 0-500ms"
  description: "Sweep delays from 0ms to 500ms in 50ms increments to find deadlock window"
  configuration_parameters:
  metadata:
    delay_start_ms: 0
    delay_end_ms: 500
    delay_increment_ms: 50
    cycles_per_delay: 3
