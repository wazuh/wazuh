WAZUH
Copyright (C) 2015, Wazuh Inc.

Based on OSSEC
Copyright (C) 2014 Trend Micro Inc.


= Information about OSSEC =

Visit https://www.wazuh.com

= Documentation page = 
Visit https://documentation.wazuh.com/current/deployment-options/wazuh-from-sources/index.html

= Recommended Installation =

OSSEC installation is very simple. It can be done in the
fast way (using the script install.sh with the default values)
or in the customized way (by hand or by changing the default values
in the install.sh script). I REALLY recommend EVERYONE to use the
FAST WAY! Only developers or experienced people should use the
other methods.

Fast way steps:

1- Run the script ./install.sh. It will guide you through the
   installation process.

2- The script will create everything in /var/ossec and try to
   create the initialization script in your system (/etc/rc.local
   or /etc/rc.d/init.d/ossec). If the init script is not created,
   make sure to follow the instructions from the install.sh to make
   OSSEC HIDS start during the boot. To start it by hand, just run
   /var/ossec/bin/wazuh-control start

3- If you are running it on multiple clients, make sure to install
   the server first. Use the manage_agents tool
   to create the right encryption keys.

4- Enjoy.


= Installation and Running (99.99% should read ABOVE) =


By Hand Installation steps:

1- Create the necessary directories (by default /var/ossec).
2- Move the necessary files to the ossec directory.
3- Compile everything.
4- Move the binaries to the default directory.
5- Create the necessary users.
6- Set the right permissions to the files.


These 5 steps are done in the Makefile (see make server).

The Makefile read the options from the LOCATION file. Change
whatever you need from there.

To compile everything by yourself the following dependencies need to be installed:

- CentOS 7
   # yum update -y
   # yum install make gcc gcc-c++ policycoreutils-python automake autoconf libtool centos-release-scl openssl-devel wget bzip2 devtoolset-7 procps -y
   # curl -OL http://packages.wazuh.com/utils/gcc/gcc-9.4.0.tar.gz && tar xzf gcc-9.4.0.tar.gz  && cd gcc-9.4.0/ && ./contrib/download_prerequisites && ./configure --enable-languages=c,c++ --prefix=/usr --disable-multilib --disable-libsanitizer && make -j$(nproc) && make install && ln -fs /usr/bin/g++ /bin/c++ && ln -fs /usr/bin/gcc /bin/cc && cd .. && rm -rf gcc-* && scl enable devtoolset-7 bash

- CentOS 8
   # yum install make cmake gcc gcc-c++ python3 python3-policycoreutils automake autoconf libtool openssl-devel yum-utils procps -y
   # curl -OL http://packages.wazuh.com/utils/gcc/gcc-9.4.0.tar.gz && tar xzf gcc-9.4.0.tar.gz  && cd gcc-9.4.0/ && ./contrib/download_prerequisites && ./configure --enable-languages=c,c++ --prefix=/usr --disable-multilib --disable-libsanitizer && make -j$(nproc) && make install && ln -fs /usr/bin/g++ /bin/c++ && ln -fs /usr/bin/gcc /bin/cc && cd .. && rm -rf gcc-* && scl enable devtoolset-7 bash
   # yum-config-manager --enable PowerTools
   # yum install libstdc++-static -y

- CentOS 9
   # yum install make cmake gcc gcc-c++ python3 python3-policycoreutils automake autoconf libtool openssl-devel yum-utils procps -y
   # curl -OL http://packages.wazuh.com/utils/gcc/gcc-9.4.0.tar.gz && tar xzf gcc-9.4.0.tar.gz  && cd gcc-9.4.0/ && ./contrib/download_prerequisites && ./configure --enable-languages=c,c++ --prefix=/usr --disable-multilib --disable-libsanitizer && make -j$(nproc) && make install && ln -fs /usr/bin/g++ /bin/c++ && ln -fs /usr/bin/gcc /bin/cc && cd .. && rm -rf gcc-* && scl enable devtoolset-7 bash
   # yum config-manager --set-enabled crb
   # yum install libstdc++-static -y

- Debian/Ubuntu
   # apt-get update
   # apt-get install python3 gcc g++ make libc6-dev curl policycoreutils automake autoconf libtool libssl-dev procps build-essential

 - Red Hat Enterprise Linux
   # dnf update -y
   # dnf install make cmake gcc gcc-c++ python3 python3-policycoreutils automake autoconf libtool openssl-devel yum-utils procps -y
   # curl -OL http://packages.wazuh.com/utils/gcc/gcc-9.4.0.tar.gz && tar xzf gcc-9.4.0.tar.gz && cd gcc-9.4.0/ && ./contrib/download_prerequisites && ./configure --enable-languages=c,c++ --prefix=/usr --disable-multilib --disable-libsanitizer && make -j$(nproc) && make install && ln -fs /usr/bin/g++ /bin/c++ && ln -fs /usr/bin/gcc /bin/cc && cd .. && rm -rf gcc-*
   # dnf config-manager --set-enabled crb
   # dnf install libstdc++-static -y

The following step is common to all OSes:
- CMake 3.18 installation
   $> curl -OL http://packages.wazuh.com/utils/cmake/cmake-3.18.3.tar.gz && tar -zxf cmake-3.18.3.tar.gz
   $> cd cmake-3.18.3 && ./bootstrap --no-system-curl
   $> make -j$(nproc) && make install
   $> cd .. && rm -rf cmake-*

Note: `gcc/g++ 5.5` and `CMake 3.12.4` are the minimun required versions to be installed.

The Python interpreter requires additional dependencies installed:

- CentOS 7/8/9
   # yum install epel-release yum-utils -y
   # yum-builddep python36 -y

- Debian/Ubuntu
   # echo "deb-src http://archive.ubuntu.com/ubuntu $(lsb_release -cs) main" >> /etc/apt/sources.list
   # apt-get update
   # apt-get build-dep python3 -y

- Red Hat Enterprise Linux
   # dnf install epel-release dnf-utils -y
   # dnf builddep python3 -y

Under wazuh/src folder:
1- make deps
2- make TARGET=<agent|server> (Optional: DEBUG=1 TEST=1)

*Before running make server, make sure to have the necessary users created.*
*The Makefile will not do that.*

#EOF
